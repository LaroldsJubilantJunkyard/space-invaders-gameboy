                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.1.6 #12539 (MINGW32)
                                      4 ;--------------------------------------------------------
                                      5 	.module player
                                      6 	.optsdcc -mgbz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _SpawnBullet
                                     12 	.globl _joypad
                                     13 	.globl _joypadPrevious
                                     14 	.globl _joypadCurrent
                                     15 	.globl _paddle
                                     16 	.globl _SetupPlayer
                                     17 	.globl _UpdatePlayer
                                     18 ;--------------------------------------------------------
                                     19 ; special function registers
                                     20 ;--------------------------------------------------------
                                     21 ;--------------------------------------------------------
                                     22 ; ram data
                                     23 ;--------------------------------------------------------
                                     24 	.area _DATA
      000000                         25 _paddle::
      000000                         26 	.ds 4
      000004                         27 _joypadCurrent::
      000004                         28 	.ds 1
      000005                         29 _joypadPrevious::
      000005                         30 	.ds 1
                                     31 ;--------------------------------------------------------
                                     32 ; ram data
                                     33 ;--------------------------------------------------------
                                     34 	.area _INITIALIZED
                                     35 ;--------------------------------------------------------
                                     36 ; absolute external ram data
                                     37 ;--------------------------------------------------------
                                     38 	.area _DABS (ABS)
                                     39 ;--------------------------------------------------------
                                     40 ; global & static initialisations
                                     41 ;--------------------------------------------------------
                                     42 	.area _HOME
                                     43 	.area _GSINIT
                                     44 	.area _GSFINAL
                                     45 	.area _GSINIT
                                     46 ;--------------------------------------------------------
                                     47 ; Home
                                     48 ;--------------------------------------------------------
                                     49 	.area _HOME
                                     50 	.area _HOME
                                     51 ;--------------------------------------------------------
                                     52 ; code
                                     53 ;--------------------------------------------------------
                                     54 	.area _CODE
                                     55 ;source/default/player.c:8: void SetupPlayer(){
                                     56 ;	---------------------------------
                                     57 ; Function SetupPlayer
                                     58 ; ---------------------------------
      000000                         59 _SetupPlayer::
                                     60 ;C:/gbdk/include/gb/gb.h:1326: shadow_OAM[nb].tile=tile;
      000000 21r02r00                61 	ld	hl, #(_shadow_OAM + 2)
      000003 36 01                   62 	ld	(hl), #0x01
      000005 21r06r00                63 	ld	hl, #(_shadow_OAM + 6)
      000008 36 02                   64 	ld	(hl), #0x02
                                     65 ;source/default/player.c:13: paddle.x=80;
      00000A 21r00r00                66 	ld	hl, #_paddle
      00000D 36 50                   67 	ld	(hl), #0x50
                                     68 ;source/default/player.c:14: paddle.y=128;
      00000F 21r01r00                69 	ld	hl, #(_paddle + 1)
      000012 36 80                   70 	ld	(hl), #0x80
                                     71 ;source/default/player.c:15: paddle.dead=0;
      000014 21r02r00                72 	ld	hl, #(_paddle + 2)
      000017 36 00                   73 	ld	(hl), #0x00
                                     74 ;source/default/player.c:17: joypadCurrent=0;
      000019 21r04r00                75 	ld	hl, #_joypadCurrent
      00001C 36 00                   76 	ld	(hl), #0x00
                                     77 ;source/default/player.c:18: joypadPrevious=0; 
      00001E 21r05r00                78 	ld	hl, #_joypadPrevious
      000021 36 00                   79 	ld	(hl), #0x00
                                     80 ;source/default/player.c:19: }
      000023 C9                      81 	ret
                                     82 ;source/default/player.c:21: void UpdatePlayer(){
                                     83 ;	---------------------------------
                                     84 ; Function UpdatePlayer
                                     85 ; ---------------------------------
      000024                         86 _UpdatePlayer::
                                     87 ;source/default/player.c:23: joypadPrevious=joypadCurrent;
      000024 FAr04r00                88 	ld	a, (#_joypadCurrent)
      000027 EAr05r00                89 	ld	(#_joypadPrevious),a
                                     90 ;source/default/player.c:24: joypadCurrent=joypad();
      00002A CDr00r00                91 	call	_joypad
      00002D 21r04r00                92 	ld	hl, #_joypadCurrent
      000030 73                      93 	ld	(hl), e
                                     94 ;source/default/player.c:26: if(joypad() & J_LEFT)paddle.x-=2;
      000031 CDr00r00                95 	call	_joypad
      000034 CB 4B                   96 	bit	1, e
      000036 28 09                   97 	jr	Z, 00104$
      000038 01r00r00                98 	ld	bc, #_paddle+0
      00003B 0A                      99 	ld	a, (bc)
      00003C 3D                     100 	dec	a
      00003D 3D                     101 	dec	a
      00003E 02                     102 	ld	(bc), a
      00003F 18 0E                  103 	jr	00105$
      000041                        104 00104$:
                                    105 ;source/default/player.c:27: else if(joypad() & J_RIGHT)paddle.x+=2;
      000041 CDr00r00               106 	call	_joypad
      000044 7B                     107 	ld	a, e
      000045 0F                     108 	rrca
      000046 30 07                  109 	jr	NC, 00105$
      000048 01r00r00               110 	ld	bc, #_paddle+0
      00004B 0A                     111 	ld	a, (bc)
      00004C C6 02                  112 	add	a, #0x02
      00004E 02                     113 	ld	(bc), a
      00004F                        114 00105$:
                                    115 ;source/default/player.c:30: if(paddle.x<8)paddle.x=8;
      00004F 01r00r00               116 	ld	bc, #_paddle+0
      000052 0A                     117 	ld	a, (bc)
      000053 D6 08                  118 	sub	a, #0x08
      000055 30 03                  119 	jr	NC, 00107$
      000057 3E 08                  120 	ld	a, #0x08
      000059 02                     121 	ld	(bc), a
      00005A                        122 00107$:
                                    123 ;source/default/player.c:31: if(paddle.x>152)paddle.x=152;
      00005A 0A                     124 	ld	a, (bc)
      00005B 5F                     125 	ld	e, a
      00005C 3E 98                  126 	ld	a,#0x98
      00005E BB                     127 	cp	a,e
      00005F 30 01                  128 	jr	NC, 00109$
      000061 02                     129 	ld	(bc), a
      000062                        130 00109$:
                                    131 ;source/default/player.c:34: if((joypadCurrent & J_A) && !(joypadPrevious & J_A)){
      000062 FAr04r00               132 	ld	a, (#_joypadCurrent)
      000065 CB 67                  133 	bit	4, a
      000067 28 18                  134 	jr	Z, 00111$
      000069 FAr05r00               135 	ld	a, (#_joypadPrevious)
      00006C CB 67                  136 	bit	4, a
      00006E 20 11                  137 	jr	NZ, 00111$
                                    138 ;source/default/player.c:35: SpawnBullet(paddle.x,paddle.y-12);
      000070 FAr01r00               139 	ld	a, (#(_paddle + 1) + 0)
      000073 C6 F4                  140 	add	a, #0xf4
      000075 47                     141 	ld	b, a
      000076 FAr00r00               142 	ld	a, (#_paddle + 0)
      000079 C5                     143 	push	bc
      00007A 33                     144 	inc	sp
      00007B F5                     145 	push	af
      00007C 33                     146 	inc	sp
      00007D CDr00r00               147 	call	_SpawnBullet
      000080 E1                     148 	pop	hl
      000081                        149 00111$:
                                    150 ;source/default/player.c:38: move_sprite(0,paddle.x,paddle.y+12);
      000081 01r00r00               151 	ld	bc, #_paddle+0
      000084 FAr01r00               152 	ld	a, (#(_paddle + 1) + 0)
      000087 C6 0C                  153 	add	a, #0x0c
      000089 57                     154 	ld	d, a
      00008A 0A                     155 	ld	a, (bc)
      00008B 5F                     156 	ld	e, a
                                    157 ;C:/gbdk/include/gb/gb.h:1399: OAM_item_t * itm = &shadow_OAM[nb];
      00008C 21r00r00               158 	ld	hl, #_shadow_OAM
                                    159 ;C:/gbdk/include/gb/gb.h:1400: itm->y=y, itm->x=x;
      00008F 7A                     160 	ld	a, d
      000090 22                     161 	ld	(hl+), a
      000091 73                     162 	ld	(hl), e
                                    163 ;source/default/player.c:39: move_sprite(1,paddle.x+8,paddle.y+12);
      000092 FAr01r00               164 	ld	a, (#(_paddle + 1) + 0)
      000095 C6 0C                  165 	add	a, #0x0c
      000097 5F                     166 	ld	e, a
      000098 0A                     167 	ld	a, (bc)
      000099 C6 08                  168 	add	a, #0x08
      00009B 4F                     169 	ld	c, a
                                    170 ;C:/gbdk/include/gb/gb.h:1399: OAM_item_t * itm = &shadow_OAM[nb];
      00009C 21r04r00               171 	ld	hl, #(_shadow_OAM + 4)
                                    172 ;C:/gbdk/include/gb/gb.h:1400: itm->y=y, itm->x=x;
      00009F 7B                     173 	ld	a, e
      0000A0 22                     174 	ld	(hl+), a
      0000A1 71                     175 	ld	(hl), c
                                    176 ;source/default/player.c:39: move_sprite(1,paddle.x+8,paddle.y+12);
                                    177 ;source/default/player.c:40: }
      0000A2 C9                     178 	ret
                                    179 	.area _CODE
                                    180 	.area _INITIALIZER
                                    181 	.area _CABS (ABS)
