                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.1.6 #12539 (MINGW32)
                                      4 ;--------------------------------------------------------
                                      5 	.module player
                                      6 	.optsdcc -mgbz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _joypad
                                     12 	.globl _paddle
                                     13 	.globl _SetupPlayer
                                     14 	.globl _DamagePlayer
                                     15 	.globl _UpdatePlayer
                                     16 ;--------------------------------------------------------
                                     17 ; special function registers
                                     18 ;--------------------------------------------------------
                                     19 ;--------------------------------------------------------
                                     20 ; ram data
                                     21 ;--------------------------------------------------------
                                     22 	.area _DATA
      000000                         23 _paddle::
      000000                         24 	.ds 5
                                     25 ;--------------------------------------------------------
                                     26 ; ram data
                                     27 ;--------------------------------------------------------
                                     28 	.area _INITIALIZED
                                     29 ;--------------------------------------------------------
                                     30 ; absolute external ram data
                                     31 ;--------------------------------------------------------
                                     32 	.area _DABS (ABS)
                                     33 ;--------------------------------------------------------
                                     34 ; global & static initialisations
                                     35 ;--------------------------------------------------------
                                     36 	.area _HOME
                                     37 	.area _GSINIT
                                     38 	.area _GSFINAL
                                     39 	.area _GSINIT
                                     40 ;--------------------------------------------------------
                                     41 ; Home
                                     42 ;--------------------------------------------------------
                                     43 	.area _HOME
                                     44 	.area _HOME
                                     45 ;--------------------------------------------------------
                                     46 ; code
                                     47 ;--------------------------------------------------------
                                     48 	.area _CODE
                                     49 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:9: void SetupPlayer(){
                                     50 ;	---------------------------------
                                     51 ; Function SetupPlayer
                                     52 ; ---------------------------------
      000000                         53 _SetupPlayer::
                                     54 ;C:/gbdk/include/gb/gb.h:1326: shadow_OAM[nb].tile=tile;
      000000 21r02r00                55 	ld	hl, #(_shadow_OAM + 2)
      000003 36 01                   56 	ld	(hl), #0x01
      000005 21r06r00                57 	ld	hl, #(_shadow_OAM + 6)
      000008 36 02                   58 	ld	(hl), #0x02
                                     59 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:14: paddle.x=80;
      00000A 21r00r00                60 	ld	hl, #_paddle
      00000D 36 50                   61 	ld	(hl), #0x50
                                     62 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:15: paddle.y=138;
      00000F 21r01r00                63 	ld	hl, #(_paddle + 1)
      000012 36 8A                   64 	ld	(hl), #0x8a
                                     65 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:16: paddle.dead=0;
      000014 21r02r00                66 	ld	hl, #(_paddle + 2)
      000017 36 00                   67 	ld	(hl), #0x00
                                     68 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:17: paddle.lives=3;
      000019 21r03r00                69 	ld	hl, #(_paddle + 3)
      00001C 36 03                   70 	ld	(hl), #0x03
                                     71 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:18: paddle.damageTimer=0;
      00001E 21r04r00                72 	ld	hl, #(_paddle + 4)
      000021 36 00                   73 	ld	(hl), #0x00
                                     74 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:19: }
      000023 C9                      75 	ret
                                     76 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:21: void DamagePlayer(uint8_t amount){
                                     77 ;	---------------------------------
                                     78 ; Function DamagePlayer
                                     79 ; ---------------------------------
      000024                         80 _DamagePlayer::
                                     81 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:22: if(amount>paddle.lives)paddle.lives=0;
      000024 01r03r00                82 	ld	bc, #_paddle + 3
      000027 0A                      83 	ld	a, (bc)
      000028 5F                      84 	ld	e, a
      000029 F8 02                   85 	ldhl	sp,	#2
      00002B 96                      86 	sub	a, (hl)
      00002C 30 04                   87 	jr	NC, 00102$
      00002E AF                      88 	xor	a, a
      00002F 02                      89 	ld	(bc), a
      000030 18 05                   90 	jr	00103$
      000032                         91 00102$:
                                     92 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:23: else paddle.lives-=amount;
      000032 7B                      93 	ld	a, e
      000033 F8 02                   94 	ldhl	sp,	#2
      000035 96                      95 	sub	a, (hl)
      000036 02                      96 	ld	(bc), a
      000037                         97 00103$:
                                     98 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:24: paddle.damageTimer=15;
      000037 21r04r00                99 	ld	hl, #(_paddle + 4)
      00003A 36 0F                  100 	ld	(hl), #0x0f
                                    101 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:27: paddle.dead=paddle.lives==0;
      00003C 0A                     102 	ld	a, (bc)
      00003D B7                     103 	or	a, a
      00003E 3E 01                  104 	ld	a, #0x01
      000040 28 01                  105 	jr	Z, 00112$
      000042 AF                     106 	xor	a, a
      000043                        107 00112$:
      000043 21r02r00               108 	ld	hl, #(_paddle + 2)
      000046 77                     109 	ld	(hl), a
                                    110 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:28: NR41_REG=0x2A;
      000047 3E 2A                  111 	ld	a, #0x2a
      000049 E0r00                  112 	ldh	(_NR41_REG + 0), a
                                    113 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:29: NR42_REG=0xA7;
      00004B 3E A7                  114 	ld	a, #0xa7
      00004D E0r00                  115 	ldh	(_NR42_REG + 0), a
                                    116 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:30: NR43_REG=0x57;
      00004F 3E 57                  117 	ld	a, #0x57
      000051 E0r00                  118 	ldh	(_NR43_REG + 0), a
                                    119 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:31: NR44_REG=0xC0;
      000053 3E C0                  120 	ld	a, #0xc0
      000055 E0r00                  121 	ldh	(_NR44_REG + 0), a
                                    122 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:33: UpdateScore();
                                    123 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:34: }
      000057 C3r00r00               124 	jp	_UpdateScore
                                    125 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:36: void UpdatePlayer(){
                                    126 ;	---------------------------------
                                    127 ; Function UpdatePlayer
                                    128 ; ---------------------------------
      00005A                        129 _UpdatePlayer::
      00005A 3B                     130 	dec	sp
                                    131 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:38: if(joypad() & J_LEFT)paddle.x-=2;
      00005B CDr00r00               132 	call	_joypad
      00005E CB 4B                  133 	bit	1, e
      000060 28 09                  134 	jr	Z, 00104$
      000062 01r00r00               135 	ld	bc, #_paddle+0
      000065 0A                     136 	ld	a, (bc)
      000066 3D                     137 	dec	a
      000067 3D                     138 	dec	a
      000068 02                     139 	ld	(bc), a
      000069 18 0E                  140 	jr	00105$
      00006B                        141 00104$:
                                    142 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:39: else if(joypad() & J_RIGHT)paddle.x+=2;
      00006B CDr00r00               143 	call	_joypad
      00006E 7B                     144 	ld	a, e
      00006F 0F                     145 	rrca
      000070 30 07                  146 	jr	NC, 00105$
      000072 01r00r00               147 	ld	bc, #_paddle+0
      000075 0A                     148 	ld	a, (bc)
      000076 C6 02                  149 	add	a, #0x02
      000078 02                     150 	ld	(bc), a
      000079                        151 00105$:
                                    152 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:42: if(paddle.x<8)paddle.x=8;
      000079 01r00r00               153 	ld	bc, #_paddle+0
      00007C 0A                     154 	ld	a, (bc)
      00007D D6 08                  155 	sub	a, #0x08
      00007F 30 03                  156 	jr	NC, 00107$
      000081 3E 08                  157 	ld	a, #0x08
      000083 02                     158 	ld	(bc), a
      000084                        159 00107$:
                                    160 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:43: if(paddle.x>152)paddle.x=152;
      000084 0A                     161 	ld	a, (bc)
      000085 5F                     162 	ld	e, a
      000086 3E 98                  163 	ld	a,#0x98
      000088 BB                     164 	cp	a,e
      000089 30 01                  165 	jr	NC, 00109$
      00008B 02                     166 	ld	(bc), a
      00008C                        167 00109$:
                                    168 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:46: if((joypadCurrent & J_A) && !(joypadPrevious & J_A)){
      00008C FAr00r00               169 	ld	a, (#_joypadCurrent)
      00008F CB 67                  170 	bit	4, a
      000091 28 36                  171 	jr	Z, 00113$
      000093 FAr00r00               172 	ld	a, (#_joypadPrevious)
      000096 CB 67                  173 	bit	4, a
      000098 20 2F                  174 	jr	NZ, 00113$
                                    175 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:48: if(shadow_OAM[2].tile==0){
      00009A FAr0Ar00               176 	ld	a, (#(_shadow_OAM + 10) + 0)
      00009D B7                     177 	or	a, a
      00009E 20 29                  178 	jr	NZ, 00113$
                                    179 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:49: shadow_OAM[2].x=paddle.x+4;
      0000A0 11r09r00               180 	ld	de, #_shadow_OAM+9
      0000A3 0A                     181 	ld	a, (bc)
      0000A4 C6 04                  182 	add	a, #0x04
      0000A6 12                     183 	ld	(de), a
                                    184 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:50: shadow_OAM[2].y=paddle.y+12;
      0000A7 01r08r00               185 	ld	bc, #_shadow_OAM+8
      0000AA FAr01r00               186 	ld	a, (#(_paddle + 1) + 0)
      0000AD C6 0C                  187 	add	a, #0x0c
      0000AF 02                     188 	ld	(bc), a
                                    189 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:51: shadow_OAM[2].tile=BULLETC_SPRITE_START;
      0000B0 21r0Ar00               190 	ld	hl, #(_shadow_OAM + 10)
      0000B3 36 0F                  191 	ld	(hl), #0x0f
                                    192 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:53: NR10_REG=0x1D;
      0000B5 3E 1D                  193 	ld	a, #0x1d
      0000B7 E0r00                  194 	ldh	(_NR10_REG + 0), a
                                    195 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:54: NR11_REG=0x4F;
      0000B9 3E 4F                  196 	ld	a, #0x4f
      0000BB E0r00                  197 	ldh	(_NR11_REG + 0), a
                                    198 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:55: NR12_REG=0x56;
      0000BD 3E 56                  199 	ld	a, #0x56
      0000BF E0r00                  200 	ldh	(_NR12_REG + 0), a
                                    201 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:56: NR13_REG=0xF6;
      0000C1 3E F6                  202 	ld	a, #0xf6
      0000C3 E0r00                  203 	ldh	(_NR13_REG + 0), a
                                    204 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:57: NR14_REG=0x86;
      0000C5 3E 86                  205 	ld	a, #0x86
      0000C7 E0r00                  206 	ldh	(_NR14_REG + 0), a
      0000C9                        207 00113$:
                                    208 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:61: if(paddle.damageTimer>0){
      0000C9 01r04r00               209 	ld	bc, #_paddle + 4
      0000CC 0A                     210 	ld	a, (bc)
                                    211 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:67: move_sprite(0,paddle.x,paddle.y+12);
                                    212 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:61: if(paddle.damageTimer>0){
      0000CD 5F                     213 	ld	e, a
      0000CE B7                     214 	or	a, a
      0000CF 28 59                  215 	jr	Z, 00119$
                                    216 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:63: paddle.damageTimer--;
      0000D1 1D                     217 	dec	e
      0000D2 7B                     218 	ld	a, e
      0000D3 02                     219 	ld	(bc), a
                                    220 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:65: if(paddle.damageTimer/3%2==0){
      0000D4 16 00                  221 	ld	d, #0x00
      0000D6 01 03 00               222 	ld	bc, #0x0003
      0000D9 C5                     223 	push	bc
      0000DA D5                     224 	push	de
      0000DB CDr00r00               225 	call	__divsint
      0000DE E8 04                  226 	add	sp, #4
      0000E0 01 02 00               227 	ld	bc, #0x0002
      0000E3 C5                     228 	push	bc
      0000E4 D5                     229 	push	de
      0000E5 CDr00r00               230 	call	__modsint
      0000E8 E8 04                  231 	add	sp, #4
      0000EA 7A                     232 	ld	a, d
      0000EB B3                     233 	or	a, e
      0000EC 20 2A                  234 	jr	NZ, 00116$
                                    235 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:67: move_sprite(0,paddle.x,paddle.y+12);
      0000EE FAr01r00               236 	ld	a, (#(_paddle + 1) + 0)
      0000F1 C6 0C                  237 	add	a, #0x0c
      0000F3 F8 00                  238 	ldhl	sp,	#0
      0000F5 77                     239 	ld	(hl), a
      0000F6 21r00r00               240 	ld	hl, #_paddle
      0000F9 4E                     241 	ld	c, (hl)
                                    242 ;C:/gbdk/include/gb/gb.h:1399: OAM_item_t * itm = &shadow_OAM[nb];
      0000FA 11r00r00               243 	ld	de, #_shadow_OAM+0
                                    244 ;C:/gbdk/include/gb/gb.h:1400: itm->y=y, itm->x=x;
      0000FD F8 00                  245 	ldhl	sp,	#0
      0000FF 7E                     246 	ld	a, (hl)
      000100 12                     247 	ld	(de), a
      000101 13                     248 	inc	de
      000102 79                     249 	ld	a, c
      000103 12                     250 	ld	(de), a
                                    251 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:68: move_sprite(1,paddle.x+8,paddle.y+12);
      000104 FAr01r00               252 	ld	a, (#(_paddle + 1) + 0)
      000107 C6 0C                  253 	add	a, #0x0c
      000109 4F                     254 	ld	c, a
      00010A FAr00r00               255 	ld	a, (#_paddle + 0)
      00010D C6 08                  256 	add	a, #0x08
      00010F 5F                     257 	ld	e, a
                                    258 ;C:/gbdk/include/gb/gb.h:1399: OAM_item_t * itm = &shadow_OAM[nb];
      000110 21r04r00               259 	ld	hl, #(_shadow_OAM + 4)
                                    260 ;C:/gbdk/include/gb/gb.h:1400: itm->y=y, itm->x=x;
      000113 79                     261 	ld	a, c
      000114 22                     262 	ld	(hl+), a
      000115 73                     263 	ld	(hl), e
                                    264 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:68: move_sprite(1,paddle.x+8,paddle.y+12);
      000116 18 34                  265 	jr	00127$
      000118                        266 00116$:
                                    267 ;C:/gbdk/include/gb/gb.h:1399: OAM_item_t * itm = &shadow_OAM[nb];
      000118 01r00r00               268 	ld	bc, #_shadow_OAM+0
                                    269 ;C:/gbdk/include/gb/gb.h:1400: itm->y=y, itm->x=x;
      00011B AF                     270 	xor	a, a
      00011C 02                     271 	ld	(bc), a
      00011D 03                     272 	inc	bc
      00011E AF                     273 	xor	a, a
      00011F 02                     274 	ld	(bc), a
                                    275 ;C:/gbdk/include/gb/gb.h:1399: OAM_item_t * itm = &shadow_OAM[nb];
      000120 01r04r00               276 	ld	bc, #_shadow_OAM+4
                                    277 ;C:/gbdk/include/gb/gb.h:1400: itm->y=y, itm->x=x;
      000123 AF                     278 	xor	a, a
      000124 02                     279 	ld	(bc), a
      000125 03                     280 	inc	bc
      000126 AF                     281 	xor	a, a
      000127 02                     282 	ld	(bc), a
                                    283 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:72: move_sprite(1,0,0);
      000128 18 22                  284 	jr	00127$
      00012A                        285 00119$:
                                    286 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:77: move_sprite(0,paddle.x,paddle.y+12);
      00012A FAr01r00               287 	ld	a, (#(_paddle + 1) + 0)
      00012D C6 0C                  288 	add	a, #0x0c
      00012F 47                     289 	ld	b, a
      000130 21r00r00               290 	ld	hl, #_paddle
      000133 4E                     291 	ld	c, (hl)
                                    292 ;C:/gbdk/include/gb/gb.h:1399: OAM_item_t * itm = &shadow_OAM[nb];
      000134 21r00r00               293 	ld	hl, #_shadow_OAM
                                    294 ;C:/gbdk/include/gb/gb.h:1400: itm->y=y, itm->x=x;
      000137 78                     295 	ld	a, b
      000138 22                     296 	ld	(hl+), a
      000139 71                     297 	ld	(hl), c
                                    298 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:78: move_sprite(1,paddle.x+8,paddle.y+12);
      00013A FAr01r00               299 	ld	a, (#(_paddle + 1) + 0)
      00013D C6 0C                  300 	add	a, #0x0c
      00013F 47                     301 	ld	b, a
      000140 FAr00r00               302 	ld	a, (#_paddle + 0)
      000143 C6 08                  303 	add	a, #0x08
      000145 4F                     304 	ld	c, a
                                    305 ;C:/gbdk/include/gb/gb.h:1399: OAM_item_t * itm = &shadow_OAM[nb];
      000146 21r04r00               306 	ld	hl, #(_shadow_OAM + 4)
                                    307 ;C:/gbdk/include/gb/gb.h:1400: itm->y=y, itm->x=x;
      000149 78                     308 	ld	a, b
      00014A 22                     309 	ld	(hl+), a
      00014B 71                     310 	ld	(hl), c
                                    311 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:78: move_sprite(1,paddle.x+8,paddle.y+12);
      00014C                        312 00127$:
                                    313 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\States\Gameplay\player.c:80: }
      00014C 33                     314 	inc	sp
      00014D C9                     315 	ret
                                    316 	.area _CODE
                                    317 	.area _INITIALIZER
                                    318 	.area _CABS (ABS)
