                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.1.6 #12539 (MINGW32)
                                      4 ;--------------------------------------------------------
                                      5 	.module Common
                                      6 	.optsdcc -mgbz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _RandomNumber
                                     12 	.globl _GetNextAvailableSprite
                                     13 	.globl _highScore
                                     14 	.globl _level
                                     15 	.globl _slideDir
                                     16 	.globl _joypadPrevious
                                     17 	.globl _joypadCurrent
                                     18 ;--------------------------------------------------------
                                     19 ; special function registers
                                     20 ;--------------------------------------------------------
                                     21 ;--------------------------------------------------------
                                     22 ; ram data
                                     23 ;--------------------------------------------------------
                                     24 	.area _DATA
      000000                         25 _joypadCurrent::
      000000                         26 	.ds 1
      000001                         27 _joypadPrevious::
      000001                         28 	.ds 1
      000002                         29 _slideDir::
      000002                         30 	.ds 1
                                     31 ;--------------------------------------------------------
                                     32 ; ram data
                                     33 ;--------------------------------------------------------
                                     34 	.area _INITIALIZED
      000000                         35 _level::
      000000                         36 	.ds 1
      000001                         37 _highScore::
      000001                         38 	.ds 1
                                     39 ;--------------------------------------------------------
                                     40 ; absolute external ram data
                                     41 ;--------------------------------------------------------
                                     42 	.area _DABS (ABS)
                                     43 ;--------------------------------------------------------
                                     44 ; global & static initialisations
                                     45 ;--------------------------------------------------------
                                     46 	.area _HOME
                                     47 	.area _GSINIT
                                     48 	.area _GSFINAL
                                     49 	.area _GSINIT
                                     50 ;--------------------------------------------------------
                                     51 ; Home
                                     52 ;--------------------------------------------------------
                                     53 	.area _HOME
                                     54 	.area _HOME
                                     55 ;--------------------------------------------------------
                                     56 ; code
                                     57 ;--------------------------------------------------------
                                     58 	.area _CODE
                                     59 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\Common.c:6: UINT8 GetNextAvailableSprite(){
                                     60 ;	---------------------------------
                                     61 ; Function GetNextAvailableSprite
                                     62 ; ---------------------------------
      000000                         63 _GetNextAvailableSprite::
                                     64 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\Common.c:8: for(UINT8 i=2;i<40;i++){
      000000 11 02 02                65 	ld	de, #0x202
      000003                         66 00106$:
      000003 7A                      67 	ld	a, d
      000004 D6 28                   68 	sub	a, #0x28
      000006 30 12                   69 	jr	NC, 00103$
                                     70 ;C:/gbdk/include/gb/gb.h:1337: return shadow_OAM[nb].tile;
      000008 01r00r00                71 	ld	bc, #_shadow_OAM+0
      00000B 6A                      72 	ld	l, d
                                     73 ;	spillPairReg hl
                                     74 ;	spillPairReg hl
      00000C 26 00                   75 	ld	h, #0x00
                                     76 ;	spillPairReg hl
                                     77 ;	spillPairReg hl
      00000E 29                      78 	add	hl, hl
      00000F 29                      79 	add	hl, hl
      000010 09                      80 	add	hl, bc
      000011 23                      81 	inc	hl
      000012 23                      82 	inc	hl
      000013 7E                      83 	ld	a, (hl)
                                     84 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\Common.c:9: if(get_sprite_tile(i)==0){
      000014 B7                      85 	or	a, a
                                     86 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\Common.c:10: return i;
      000015 C8                      87 	ret	Z
                                     88 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\Common.c:8: for(UINT8 i=2;i<40;i++){
      000016 14                      89 	inc	d
      000017 5A                      90 	ld	e, d
      000018 18 E9                   91 	jr	00106$
      00001A                         92 00103$:
                                     93 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\Common.c:13: return 39;
      00001A 1E 27                   94 	ld	e, #0x27
                                     95 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\Common.c:14: }
      00001C C9                      96 	ret
                                     97 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\Common.c:17: UINT8 RandomNumber(UINT8 min, UINT8 max){
                                     98 ;	---------------------------------
                                     99 ; Function RandomNumber
                                    100 ; ---------------------------------
      00001D                        101 _RandomNumber::
                                    102 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\Common.c:23: UINT8 v = (*(ptr_div_reg))+shadow_OAM[0].x+shadow_OAM[1].x+shadow_OAM[2].x+shadow_OAM[3].x+shadow_OAM[4].x;
      00001D 21 04 FF               103 	ld	hl, #0xff04
      000020 4E                     104 	ld	c, (hl)
      000021 FAr01r00               105 	ld	a, (#(_shadow_OAM + 1) + 0)
      000024 81                     106 	add	a, c
      000025 4F                     107 	ld	c, a
      000026 FAr05r00               108 	ld	a, (#(_shadow_OAM + 5) + 0)
      000029 81                     109 	add	a, c
      00002A 4F                     110 	ld	c, a
      00002B FAr09r00               111 	ld	a, (#(_shadow_OAM + 9) + 0)
      00002E 81                     112 	add	a, c
      00002F 4F                     113 	ld	c, a
      000030 FAr0Dr00               114 	ld	a, (#(_shadow_OAM + 13) + 0)
      000033 81                     115 	add	a, c
      000034 4F                     116 	ld	c, a
      000035 FAr11r00               117 	ld	a, (#(_shadow_OAM + 17) + 0)
      000038 81                     118 	add	a, c
      000039 4F                     119 	ld	c, a
                                    120 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\Common.c:25: return min+(v % (max-min));    // get value at memory address
      00003A F8 03                  121 	ldhl	sp,	#3
      00003C 3A                     122 	ld	a, (hl-)
      00003D 06 00                  123 	ld	b, #0x00
      00003F 5E                     124 	ld	e, (hl)
      000040 16 00                  125 	ld	d, #0x00
      000042 93                     126 	sub	a, e
      000043 5F                     127 	ld	e, a
      000044 78                     128 	ld	a, b
      000045 9A                     129 	sbc	a, d
      000046 06 00                  130 	ld	b, #0x00
      000048 57                     131 	ld	d, a
      000049 D5                     132 	push	de
      00004A C5                     133 	push	bc
      00004B CDr00r00               134 	call	__modsint
      00004E E8 04                  135 	add	sp, #4
      000050 F8 02                  136 	ldhl	sp,	#2
      000052 7E                     137 	ld	a, (hl)
      000053 83                     138 	add	a, e
      000054 5F                     139 	ld	e, a
                                    140 ;D:\Business\LaroldsJubilantJunkyard\game-remakes\space-invaders\source\main\default\Common.c:26: }
      000055 C9                     141 	ret
                                    142 	.area _CODE
                                    143 	.area _INITIALIZER
      000000                        144 __xinit__level:
      000000 01                     145 	.db #0x01	; 1
      000001                        146 __xinit__highScore:
      000001 00                     147 	.db #0x00	; 0
                                    148 	.area _CABS (ABS)
